<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>AMP Template Generator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: sans-serif;
      max-width: 800px;
      margin: 2rem auto;
      padding: 0 1rem;
    }
    h1 { font-size: 1.8rem; }
    label { display: block; margin-top: 1rem; font-weight: bold; }
    input, select, textarea {
      width: 100%;
      padding: 0.4rem;
      margin-top: 0.2rem;
    }
    button {
      margin-top: 2rem;
      padding: 0.6rem 1.2rem;
      font-size: 1rem;
    }
    .lang-switch {
      float: right;
      font-size: 0.9rem;
      margin-top: -2rem;
    }
    pre { background: #f4f4f4; padding: 1rem; white-space: pre-wrap; }
  </style>
</head>
<body>
  <div class="lang-switch">
    Sprache: <button onclick="switchLang('de')">ðŸ‡©ðŸ‡ª</button> <button onclick="switchLang('en')">ðŸ‡¬ðŸ‡§</button>
  </div>
  <h1 id="title">AMP Template Generator</h1>

  <label id="label_app_name" for="app_name">Anwendungsname</label>
  <input type="text" id="app_name" placeholder="z.â€¯B. Minecraft Server">

  <label id="label_app_desc" for="app_desc">Beschreibung</label>
  <textarea id="app_desc" placeholder="z.â€¯B. Dedizierter Server fÃ¼r Minecraft Bedrock Edition"></textarea>

  <label id="label_os">UnterstÃ¼tzte Betriebssysteme</label>
  <select id="os" multiple>
    <option value="Windows">Windows</option>
    <option value="Linux">Linux</option>
  </select>

  <label id="label_author" for="author">Autor</label>
  <input type="text" id="author" placeholder="z.â€¯B. suerion">

  <label id="label_url" for="url">Website oder Dokumentation</label>
  <input type="url" id="url" placeholder="https://example.com">

  <label id="label_exe_win" for="exe_win">Windows-Executable</label>
  <input type="text" id="exe_win" placeholder="z.â€¯B. server.exe">

  <label id="label_exe_linux" for="exe_linux">Linux-Executable</label>
  <input type="text" id="exe_linux" placeholder="z.â€¯B. server.x86_64">

  <label id="label_workingdir" for="working_dir">Arbeitsverzeichnis</label>
  <input type="text" id="working_dir" placeholder="z.â€¯B. ./896660">

  <label id="label_startargs" for="start_args">Startparameter (mit {{Platzhaltern}})</label>
  <textarea id="start_args" placeholder="z.â€¯B. -name {{ServerName}} -port {{ApplicationPort1}}"></textarea>

  <label id="label_port" for="port">Haupt-Port (Game-Port)</label>
  <input type="number" id="port" placeholder="z.â€¯B. 27015">

  <label id="label_port_proto" for="port_proto">Protokoll</label>
  <select id="port_proto">
    <option value="UDP">UDP</option>
    <option value="TCP">TCP</option>
    <option value="Both">Beides</option>
  </select>

  <label for="server_name">Konfig: Servername</label>
  <input type="text" id="server_name" placeholder="z.â€¯B. Mein Server">

  <label for="password">Konfig: Passwort</label>
  <input type="text" id="password" placeholder="z.â€¯B. geheim">

  <label for="max_players">Konfig: Max. Spieler</label>
  <input type="number" id="max_players" value="8">

  <button onclick="generateTemplate()" id="generate_button">Template generieren</button>

  <h2>Ausgabe: .kvp</h2>
  <pre id="kvp_output"></pre>

  <h2>Ausgabe: ports.json</h2>
  <pre id="ports_output"></pre>

  <h2>Ausgabe: config.json</h2>
  <pre id="config_output"></pre>

  <script>
    function switchLang(lang) {
      location.reload(); // einfache Umschaltung fÃ¼r statische Seite
    }

    function generateTemplate() {
      const name = document.getElementById('app_name').value;
      const desc = document.getElementById('app_desc').value;
      const author = document.getElementById('author').value;
      const url = document.getElementById('url').value;
      const exeWin = document.getElementById('exe_win').value;
      const exeLinux = document.getElementById('exe_linux').value;
      const workingDir = document.getElementById('working_dir').value;
      const startArgs = document.getElementById('start_args').value;
      const port = document.getElementById('port').value;
      const portProto = document.getElementById('port_proto').value;
      const os = Array.from(document.getElementById('os').selectedOptions).map(opt => opt.value).join(', ');

      const serverName = document.getElementById('server_name').value;
      const password = document.getElementById('password').value;
      const maxPlayers = document.getElementById('max_players').value;

      const kvp = `Meta.DisplayName=${name}
Meta.Description=${desc}
Meta.Author=${author}
Meta.URL=${url}
Meta.OS=${os}
Meta.ConfigManifest=${name.toLowerCase()}config.json
App.DisplayName=${name}
App.ExecutableWin=${exeWin}
App.ExecutableLinux=${exeLinux}
App.WorkingDir=${workingDir}
App.CommandLineArgs=${startArgs}
App.Ports=@IncludeJson[${name.toLowerCase()}ports.json]
App.PrimaryApplicationPortRef=ApplicationPort1`;

      const ports = JSON.stringify([
        {
          Name: "ApplicationPort1",
          Description: "Primary game port",
          Protocol: portProto,
          Default: parseInt(port),
          Type: "Game"
        }
      ], null, 2);

      const config = JSON.stringify({
        ServerName: {
          DisplayName: "Servername",
          Description: "Name des Servers im Spiel",
          Type: "string",
          Default: serverName
        },
        Password: {
          DisplayName: "Passwort",
          Description: "Zugangsschutz zum Server",
          Type: "string",
          Default: password
        },
        MaxPlayers: {
          DisplayName: "Maximale Spieler",
          Description: "Wie viele Spieler dÃ¼rfen joinen?",
          Type: "integer",
          Default: parseInt(maxPlayers)
        }
      }, null, 2);

      document.getElementById('kvp_output').textContent = kvp;
      document.getElementById('ports_output').textContent = ports;
      document.getElementById('config_output').textContent = config;
    }
  </script>
</body>
</html>
